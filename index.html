<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Padel Dashboard ‚Äì Admin</title>
<style>
    body {
        font-family: 'Segoe UI', sans-serif;
        margin: 0;
        background: url('https://upload.wikimedia.org/wikipedia/commons/0/0b/Padel_court_blue.jpg') no-repeat center center fixed;
        background-size: cover;
        color: #222;
    }
    body::before {
        content: "";
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(255,255,255,0.7);
        z-index: -1;
    }
    header {
        text-align: center;
        padding: 20px;
        font-size: 1.8em;
        font-weight: bold;
        background: linear-gradient(90deg, #00b4d8, #48cae4);
        color: white;
        position: relative;
        overflow: hidden;
    }
    header small {
        display: block;
        font-size: 0.8em;
        color: #ffdd00;
    }
    .ball {
        position: absolute;
        top: 50%;
        left: -50px;
        width: 40px;
        height: 40px;
        background: #ffdd00;
        border-radius: 50%;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
        animation: moveBall 6s linear infinite;
    }
    @keyframes moveBall {
        0% { left: -50px; transform: translateY(-50%) rotate(0deg);}
        50% { left: calc(100% + 50px); transform: translateY(-50%) rotate(360deg);}
        100% { left: -50px; transform: translateY(-50%) rotate(720deg);}
    }
    .container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        padding: 20px;
    }
    section {
        background: white;
        padding: 15px;
        border-radius: 12px;
        flex: 1;
        min-width: 300px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        animation: fadeIn 0.5s ease-in-out;
    }
    @keyframes fadeIn {
        from {opacity: 0; transform: translateY(10px);}
        to {opacity: 1; transform: translateY(0);}
    }
    h2 {
        margin-top: 0;
        color: #0077b6;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    h2 span {
        font-size: 1.2em;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 8px;
    }
    th, td {
        padding: 8px;
        border-bottom: 1px solid #ccc;
        text-align: center;
    }
    th {
        background: #00b4d8;
        color: white;
    }
    input[type="number"] {
        width: 50px;
    }
    button {
        padding: 8px 14px;
        margin: 5px;
        background: #00b4d8;
        border: none;
        color: white;
        border-radius: 6px;
        cursor: pointer;
        transition: background 0.3s ease;
    }
    button:hover {
        background: #0096c7;
    }
    .team1 {
        background: #007bff;
        color: white;
        border-radius: 4px;
        padding: 4px;
    }
    .team2 {
        background: #ff7b00;
        color: white;
        border-radius: 4px;
        padding: 4px;
    }
    @media (max-width: 900px) {
        .container {
            flex-direction: column;
        }
    }
</style>
</head>
<body>

<header>
    üéæ Padel Dashboard ‚Äì Admin
    <div class="ball"></div>
    <small id="currentDate"></small>
</header>

<div style="text-align:center; padding:10px;">
    <input type="text" id="newPlayer" placeholder="Naam speler">
    <button onclick="addPlayer()">‚ûï Speler toevoegen</button>
    <button style="background:red;" onclick="resetAll()">üóë Reset</button>
</div>

<div class="container">
    <section>
        <h2>üèÜ Leaderboard</h2>
        <table id="leaderboard">
            <thead>
                <tr>
                    <th>Actief</th>
                    <th>Naam</th>
                    <th>Gespeeld</th>
                    <th>Winst</th>
                    <th>Verlies</th>
                    <th>Win%</th>
                    <th>Punten</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </section>

    <section>
        <h2>üîÑ Teamgenerator</h2>
        <button onclick="generateTeams()">Genereer Teams üèì</button>
        <table id="teams">
            <thead>
                <tr>
                    <th class="team1">Team 1</th>
                    <th class="team2">Team 2</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </section>
</div>

<script>
let players = JSON.parse(localStorage.getItem('players')) || [];
document.getElementById("currentDate").textContent = new Date().toLocaleDateString('nl-NL', { weekday:"long", year:"numeric", month:"long", day:"numeric" });

function saveData() {
    localStorage.setItem('players', JSON.stringify(players));
}

function addPlayer() {
    let name = document.getElementById("newPlayer").value.trim();
    if(name) {
        players.push({name, played: 0, wins: 0, losses: 0, points: 0, active: false});
        document.getElementById("newPlayer").value = "";
        updateLeaderboard();
        saveData();
        animateBall();
    }
}

function animateBall() {
    let ball = document.createElement('div');
    ball.style.position = 'absolute';
    ball.style.width = '20px';
    ball.style.height = '20px';
    ball.style.background = '#ffdd00';
    ball.style.borderRadius = '50%';
    ball.style.left = '50%';
    ball.style.top = '50%';
    ball.style.transform = 'translate(-50%, -50%)';
    ball.style.zIndex = '999';
    document.body.appendChild(ball);
    let y = 0;
    let interval = setInterval(() => {
        y += 5;
        ball.style.top = (50 + Math.sin(y/10)*20) + '%';
        if (y > 100) { clearInterval(interval); ball.remove(); }
    }, 30);
}

function toggleActive(index) {
    players[index].active = !players[index].active;
    saveData();
}

function updatePoints(index, value) {
    players[index].points = parseInt(value) || 0;
    updateLeaderboard();
    saveData();
}

function updateLeaderboard() {
    let tbody = document.querySelector("#leaderboard tbody");
    tbody.innerHTML = "";
    players.sort((a,b) => b.points - a.points);
    players.forEach((p,i) => {
        let winPercent = p.played > 0 ? ((p.wins / p.played) * 100).toFixed(1) + "%" : "0%";
        tbody.innerHTML += `
        <tr>
            <td><input type="checkbox" ${p.active ? 'checked' : ''} onclick="toggleActive(${i})"></td>
            <td>${p.name}</td>
            <td>${p.played}</td>
            <td>${p.wins}</td>
            <td>${p.losses}</td>
            <td>${winPercent}</td>
            <td><input type="number" value="${p.points}" onchange="updatePoints(${i}, this.value)" style="width:50px"></td>
        </tr>`;
    });
}

function generateTeams() {
    let activePlayers = players.filter(p => p.active);
    if(activePlayers.length < 2) {
        alert("Minimaal 2 actieve spelers nodig!");
        return;
    }
    activePlayers.sort((a,b) => b.points - a.points);
    let high = [...activePlayers];
    let low = high.splice(Math.ceil(activePlayers.length / 2));
    let tbody = document.querySelector("#teams tbody");
    tbody.innerHTML = "";
    while(high.length > 0 && low.length > 0) {
        let p1 = high.shift();
        let p2 = low.pop();
        tbody.innerHTML += `<tr><td class="team1">${p1.name}</td><td class="team2">${p2.name}</td></tr>`;
    }
    animateRacket();
}

function animateRacket() {
    let racket = document.createElement('div');
    racket.textContent = 'üèì';
    racket.style.position = 'fixed';
    racket.style.bottom = '20px';
    racket.style.right = '20px';
    racket.style.fontSize = '40px';
    racket.style.animation = 'swing 1s ease-in-out';
    document.body.appendChild(racket);
    setTimeout(() => racket.remove(), 1000);
}

function resetAll() {
    if(confirm("Weet je zeker dat je alles wilt resetten?")) {
        players = [];
        saveData();
        updateLeaderboard();
        document.querySelector("#teams tbody").innerHTML = "";
    }
}

updateLeaderboard();
</script>

<style>
@keyframes swing {
    0% { transform: rotate(0deg);}
    25% { transform: rotate(20deg);}
    50% { transform: rotate(-20deg);}
    75% { transform: rotate(20deg);}
    100% { transform: rotate(0deg);}
}
</style>

</body>
</html>
