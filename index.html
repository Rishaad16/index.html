<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Padel Dashboard ‚Äì Admin</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        background: url('https://upload.wikimedia.org/wikipedia/commons/e/e7/Padel_court_2.jpg') no-repeat center center fixed;
        background-size: cover;
        color: white;
    }
    body::before {
        content: "";
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.6);
        z-index: -1;
    }
    header {
        text-align: center;
        padding: 15px;
        font-size: 1.8em;
        font-weight: bold;
        background: rgba(0,0,0,0.5);
    }
    header small {
        display: block;
        font-size: 0.8em;
        color: #ffd700;
    }
    .container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        padding: 20px;
    }
    section {
        background: rgba(0, 0, 0, 0.75);
        padding: 15px;
        border-radius: 10px;
        flex: 1;
        min-width: 300px;
    }
    h2 {
        margin-top: 0;
        color: #ffd700;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 8px;
    }
    th, td {
        padding: 6px;
        border-bottom: 1px solid #555;
        text-align: center;
    }
    th {
        background: #1e90ff;
        color: white;
    }
    input, select {
        padding: 5px;
        margin: 3px;
    }
    button {
        padding: 6px 12px;
        margin: 3px;
        background: #1e90ff;
        border: none;
        color: white;
        border-radius: 5px;
        cursor: pointer;
    }
    button:hover {
        background: #63b3ed;
    }
    .team1 {
        background: #007bff;
        color: white;
    }
    .team2 {
        background: #ff6600;
        color: white;
    }
    @media (max-width: 900px) {
        .container {
            flex-direction: column;
        }
    }
</style>
</head>
<body>

<header>
    üéæ Padel Dashboard ‚Äì Admin
    <small id="currentDate"></small>
</header>

<div style="text-align:center; padding:10px;">
    <input type="text" id="newPlayer" placeholder="Naam speler">
    <button onclick="addPlayer()">‚ûï Speler toevoegen</button>
    <button style="background:red;" onclick="resetAll()">üóë Reset</button>
</div>

<div class="container">
    <section>
        <h2>üèÜ Leaderboard</h2>
        <table id="leaderboard">
            <thead>
                <tr>
                    <th>Actief</th>
                    <th>Naam</th>
                    <th>Gespeeld</th>
                    <th>Winst</th>
                    <th>Verlies</th>
                    <th>Win%</th>
                    <th>Punten</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </section>

    <section>
        <h2>üîÑ Teamgenerator</h2>
        <button onclick="generateTeams()">Genereer Teams</button>
        <table id="teams">
            <thead>
                <tr>
                    <th class="team1">Team 1</th>
                    <th class="team2">Team 2</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </section>
</div>

<script>
let players = JSON.parse(localStorage.getItem('players')) || [];
document.getElementById("currentDate").textContent = new Date().toLocaleDateString('nl-NL', { weekday:"long", year:"numeric", month:"long", day:"numeric" });

function saveData() {
    localStorage.setItem('players', JSON.stringify(players));
}

function addPlayer() {
    let name = document.getElementById("newPlayer").value.trim();
    if(name) {
        players.push({name, played: 0, wins: 0, losses: 0, points: 0, active: false});
        document.getElementById("newPlayer").value = "";
        updateLeaderboard();
        saveData();
    }
}

function toggleActive(index) {
    players[index].active = !players[index].active;
    saveData();
}

function updatePoints(index, value) {
    players[index].points = parseInt(value) || 0;
    updateLeaderboard();
    saveData();
}

function updateLeaderboard() {
    let tbody = document.querySelector("#leaderboard tbody");
    tbody.innerHTML = "";
    players.sort((a,b) => b.points - a.points);
    players.forEach((p,i) => {
        let winPercent = p.played > 0 ? ((p.wins / p.played) * 100).toFixed(1) + "%" : "0%";
        tbody.innerHTML += `
        <tr>
            <td><input type="checkbox" ${p.active ? 'checked' : ''} onclick="toggleActive(${i})"></td>
            <td>${p.name}</td>
            <td>${p.played}</td>
            <td>${p.wins}</td>
            <td>${p.losses}</td>
            <td>${winPercent}</td>
            <td><input type="number" value="${p.points}" onchange="updatePoints(${i}, this.value)" style="width:50px"></td>
        </tr>`;
    });
}

function generateTeams() {
    let activePlayers = players.filter(p => p.active);
    if(activePlayers.length < 2) {
        alert("Minimaal 2 actieve spelers nodig!");
        return;
    }
    activePlayers.sort((a,b) => b.points - a.points);
    let high = [...activePlayers];
    let low = high.splice(Math.ceil(activePlayers.length / 2));
    let tbody = document.querySelector("#teams tbody");
    tbody.innerHTML = "";
    while(high.length > 0 && low.length > 0) {
        let p1 = high.shift();
        let p2 = low.pop();
        tbody.innerHTML += `<tr><td class="team1">${p1.name}</td><td class="team2">${p2.name}</td></tr>`;
    }
}

function resetAll() {
    if(confirm("Weet je zeker dat je alles wilt resetten?")) {
        players = [];
        saveData();
        updateLeaderboard();
        document.querySelector("#teams tbody").innerHTML = "";
    }
}

updateLeaderboard();
</script>

</body>
</html>
